@model BuildInspect.Models.ViewModel.AssessmentWetAreaWaterTightnessTestEntryViewModel
@using BuildInspect.Models.ViewModel
@{
    Layout = null;
    var RowCnt = 1;
    var modRowCnt = 1;
    Model.ResultCount++;
}
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@ViewBag.Title</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.1/css/all.min.css">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <!-- Style CSS -->
    <style>
        .datepicker {
            z-index: 99999 !important;
        }

        #ui-datepicker-div {
            width: 30% !important;
        }

        .table-overflow-cont {
            overflow-x: scroll;
            width: 100%;
            overflow-y: visible;
            height: calc(100vh - 44px);
        }

        .min-w-200px {
            min-width: 200px;
        }

        .min-w-150px {
            min-width: 150px;
        }

        .min-w-50px {
            min-width: 50px;
        }
        /* table border css - start */

        table#Wet-Area-Water-Tightness-Test-tbl {
            border-collapse: separate;
            border: none;
            border-spacing: 0;
        }

            table#Wet-Area-Water-Tightness-Test-tbl tr td {
                padding: 5px;
                border-left: none;
                border-right: 1px solid #000000;
                border-top: none;
                border-bottom: 1px solid #000000;
            }

            table#Wet-Area-Water-Tightness-Test-tbl thead tr:first-child td {
                border-top: 1px solid #000000;
            }

            table#Wet-Area-Water-Tightness-Test-tbl tbody tr td.sticky-col-1:first-child,
            table#Wet-Area-Water-Tightness-Test-tbl thead tr td:first-child,
            table#Wet-Area-Water-Tightness-Test-tbl tfoot tr td:first-child {
                border-left: 1px solid #000000;
            }

            table#Wet-Area-Water-Tightness-Test-tbl thead tr:first-child td:first-child {
                border-top-left-radius: 5px;
            }

            table#Wet-Area-Water-Tightness-Test-tbl thead tr:first-child td:last-child {
                border-top-right-radius: 5px;
            }

            table#Wet-Area-Water-Tightness-Test-tbl tfoot tr:last-child td:first-child {
                border-bottom-left-radius: 5px;
            }

            table#Wet-Area-Water-Tightness-Test-tbl tfoot tr:last-child td:last-child {
                border-bottom-right-radius: 5px;
            }
        /* table border css - end */
        /* sticky table column - start */

        #Wet-Area-Water-Tightness-Test-tbl .sticky-col-1,
        #Wet-Area-Water-Tightness-Test-tbl .sticky-col-2,
        #Wet-Area-Water-Tightness-Test-tbl .sticky-col-3,
        #Wet-Area-Water-Tightness-Test-tbl .sticky-col-4 {
            position: sticky;
            z-index: 3;
            background-color: #ffffff;
        }

        #Wet-Area-Water-Tightness-Test-tbl .sticky-col-1 {
            left: 0;
            text-align: center;
        }

        #Wet-Area-Water-Tightness-Test-tbl .sticky-col-2 {
            left: 50px;
        }

        #Wet-Area-Water-Tightness-Test-tbl .sticky-col-3 {
            left: calc(50px + 200px);
        }

        #Wet-Area-Water-Tightness-Test-tbl .sticky-col-4 {
            left: calc(50px + 200px + 150px);
        }
        /* sticky table column - end */
        /* sticky table row - start */

        #Wet-Area-Water-Tightness-Test-tbl thead tr.sticky-row-1 td,
        #Wet-Area-Water-Tightness-Test-tbl thead tr.sticky-row-2 td,
        #Wet-Area-Water-Tightness-Test-tbl thead tr.sticky-row-3 td,
        #Wet-Area-Water-Tightness-Test-tbl thead tr.sticky-row-4 td,
        #Wet-Area-Water-Tightness-Test-tbl thead tr.sticky-row-1 td:first-child,
        #Wet-Area-Water-Tightness-Test-tbl thead tr.sticky-row-2 td:first-child,
        #Wet-Area-Water-Tightness-Test-tbl thead tr.sticky-row-3 td:first-child,
        #Wet-Area-Water-Tightness-Test-tbl thead tr.sticky-row-4 td:first-child,
        #Wet-Area-Water-Tightness-Test-tbl tfoot tr td:first-child,
        #Wet-Area-Water-Tightness-Test-tbl thead tr.sticky-row-1 td:nth-child(2),
        #Wet-Area-Water-Tightness-Test-tbl thead tr.sticky-row-2 td:nth-child(2),
        #Wet-Area-Water-Tightness-Test-tbl thead tr.sticky-row-3 td:nth-child(2),
        #Wet-Area-Water-Tightness-Test-tbl thead tr.sticky-row-1 td:nth-child(3),
        #Wet-Area-Water-Tightness-Test-tbl thead tr.sticky-row-2 td:nth-child(3),
        #Wet-Area-Water-Tightness-Test-tbl thead tr.sticky-row-3 td:nth-child(3),
        #Wet-Area-Water-Tightness-Test-tbl thead tr.sticky-row-4 td:nth-child(2) {
            position: sticky;
            background-color: #ffffff;
        }

        #Wet-Area-Water-Tightness-Test-tbl thead tr.sticky-row-1 td,
        #Wet-Area-Water-Tightness-Test-tbl thead tr.sticky-row-2 td,
        #Wet-Area-Water-Tightness-Test-tbl thead tr.sticky-row-3 td,
        #Wet-Area-Water-Tightness-Test-tbl thead tr.sticky-row-4 td {
            /*position: sticky;*/
            z-index: 10;
            /*background-color: #ffffff;*/
        }

            #Wet-Area-Water-Tightness-Test-tbl thead tr.sticky-row-1 td:first-child,
            #Wet-Area-Water-Tightness-Test-tbl thead tr.sticky-row-2 td:first-child,
            #Wet-Area-Water-Tightness-Test-tbl thead tr.sticky-row-3 td:first-child,
            #Wet-Area-Water-Tightness-Test-tbl thead tr.sticky-row-4 td:first-child,
            #Wet-Area-Water-Tightness-Test-tbl tfoot tr td:first-child {
                /*position: sticky;*/
                left: 0;
                z-index: 11;
                /*background-color: #ffffff;*/
            }

            /*#Wet-Area-Water-Tightness-Test-tbl thead tr.sticky-row-1 td:nth-child(2),*/
            /*#Wet-Area-Water-Tightness-Test-tbl thead tr.sticky-row-2 td:nth-child(2),*/
            /*#Wet-Area-Water-Tightness-Test-tbl thead tr.sticky-row-3 td:nth-child(2) {*/
            /*position: sticky;*/
            /*left: 50px;
            z-index: 11;*/
            /*background-color: #ffffff;*/
            /*}*/

            #Wet-Area-Water-Tightness-Test-tbl thead tr.sticky-row-1 td:nth-child(3),
            #Wet-Area-Water-Tightness-Test-tbl thead tr.sticky-row-2 td:nth-child(3),
            #Wet-Area-Water-Tightness-Test-tbl thead tr.sticky-row-3 td:nth-child(3),
            #Wet-Area-Water-Tightness-Test-tbl thead tr.sticky-row-4 td:nth-child(2) {
                /*position: sticky;*/
                left: 250px;
                z-index: 11;
                /*background-color: #ffffff;*/
            }

        #Wet-Area-Water-Tightness-Test-tbl thead tr.sticky-row-1 td {
            top: 0;
        }

        #Wet-Area-Water-Tightness-Test-tbl thead tr.sticky-row-2 td {
            top: 36px;
        }

        #Wet-Area-Water-Tightness-Test-tbl thead tr.sticky-row-3 td {
            top: 71px;
        }

        #Wet-Area-Water-Tightness-Test-tbl thead tr.sticky-row-4 td {
            top: 106px;
        }
        /* sticky table row - end */
        /* vertical text in td -start */

        .verticalTD td:not(:first-child) {
            height: 200px;
            max-width: 50px;
        }

        .verticalTD td span {
            display: block;
            white-space: nowrap;
            transform: rotate(-90deg) translatex(-75px);
        }
        /* vertical text in td -end */
        /* checkbox checkmark - start */

        .tdChechBox {
            min-width: 50px;
            position: relative;
            cursor: pointer;
        }

            .tdChechBox[aria-checked="null"]::before,
            .tdChechBox[aria-checked="null"]::after,
            .tdChechBox[aria-checked="true"]::after,
            .tdChechBox[aria-checked="false"]::before {
                display: none;
            }

            .tdChechBox[aria-checked="true"]::before {
                display: inline-block;
            }

            .tdChechBox[aria-checked="false"]::after {
                display: inline-block;
            }

            .tdChechBox i {
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
            }

            .tdChechBox:focus {
                outline: none;
            }

            .tdChechBox::before,
            .tdChechBox::after {
                font-family: "Font Awesome 5 Free";
                font-weight: 900;
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
            }

            .tdChechBox::before {
                content: "\f00c";
                color: #28a745;
            }

            .tdChechBox::after {
                content: "\f00d";
                color: #dc3545;
            }

            .tdChechBox[disabled=""]::before,
            .tdChechBox[disabled=""]::after {
                color: #545b62;
            }

            .tdChechBox[disabled=""] {
                cursor: not-allowed;
            }
        /* checkbox checkmark - end */

        /* checkbox checkmark - start */
        .tdCheckBoxResult {
            min-width: 50px;
            position: relative;
            cursor: pointer;
        }

            .tdCheckBoxResult[aria-checked="null"]::before,
            .tdCheckBoxResult[aria-checked="null"]::after,
            .tdCheckBoxResult[aria-checked="true"]::after,
            .tdCheckBoxResult[aria-checked="false"]::before {
                display: none;
            }

            .tdCheckBoxResult[aria-checked="true"]::before {
                display: inline-block;
            }

            .tdCheckBoxResult[aria-checked="false"]::after {
                display: inline-block;
            }

            .tdCheckBoxResult i {
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
            }

            .tdCheckBoxResult:focus {
                outline: none;
            }

            .tdCheckBoxResult::before,
            .tdCheckBoxResult::after {
                font-family: "Font Awesome 5 Free";
                font-weight: 900;
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
            }

            .tdCheckBoxResult::before {
                content: "\f00c";
                color: #28a745;
            }

            .tdCheckBoxResult::after {
                content: "\f00d";
                color: #dc3545;
            }

            .tdCheckBoxResult[disabled=""]::before,
            .tdCheckBoxResult[disabled=""]::after {
                color: #545b62;
            }

            .tdCheckBoxResult[disabled=""] {
                cursor: not-allowed;
            }
        /* checkbox checkmark - end */

        #Wet-Area-Water-Tightness-Test-tbl .selected td {
            background-color: #d1dade;
        }

        .myModel {
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: 11;
            background-color: rgba(0, 0, 0, 0.25);
            display: none;
        }

        .modelContent {
            background-color: #ffffff;
            max-width: 500px;
        }
    </style>
</head>
<body class="hold-transition">
    @using (Html.BeginForm(null, null, FormMethod.Post, new { id = "WetAreaWaterTightnessTest_Form", @class = "form-horizontal", enctype = "multipart/form-data" }))
    {
        @Html.AntiForgeryToken()
        @Html.HiddenFor(model => Model.assessmentWetAreaWaterTightnessTestIndexViewModel.ProjectID, new { @id = "hdnForProjectID" })
        @Html.HiddenFor(model => Model.ModuleAndProcess, new { @id = "hdnForModuleAndProcess" })
        @Html.Hidden("HdnID")
        @Html.Hidden("HdnZoom", 100)
        @Html.ValidationSummary(true, "", new { @class = "text-danger" })
        <table id="Wet-Area-Water-Tightness-Test-tbl" border="1">
            <tr class="text-center">
                <td class="min-w-50px" style="border:none"></td>
                <td class="min-w-200px text-right" style="border-left: 1px solid #000000;border-top: 1px solid #000000;">
                    Project :
                </td>
                <td colspan="3" class="text-left" style="border-top: 1px solid #000000;">
                    @Model.projectMasterView.Project_Name
                </td>
                <td rowspan="6" colspan="3" style="border:none" valign="middle" align="center" class="text-center">
                    <div class="logoContainrer">
                        <img src="~/images/logo.png" width="auto" height="75">
                    </div>
                </td>
            </tr>
            <tr class="text-center">
                <td class="min-w-50px" style="border:none"></td>
                <td class="text-right" style="border-left: 1px solid #000000;">
                    Developer :
                </td>
                <td colspan="3" class="text-left">
                    @Model.projectMasterView.Developer_Name
                </td>
            </tr>
            <tr>
                <td class="min-w-50px" style="border:none"></td>
                <td class="text-right" style="border-left: 1px solid #000000;">
                    Contractor :
                </td>
                <td colspan="3" class="text-left">
                    @Model.projectMasterView.Contractor_Name
                </td>
            </tr>
            <tr>
                <td class="min-w-50px" style="border:none"></td>
                <td class="text-right" style="border-left: 1px solid #000000;">
                    Windows / External Wall Contractor :
                </td>
                <td colspan="3" class="text-left">
                    @Model.projectMasterView.WetAreaWTT_Contractor_Name
                </td>
            </tr>
            <tr>
                <td class="min-w-50px" style="border:none"></td>
                <td class="text-right" style="border-left: 1px solid #000000;">
                    Witness :
                </td>
                <td colspan="3" class="text-left">
                    @Model.projectMasterView.WetAreaWTT_Witness_Name
                </td>
            </tr>
            <tr>
                <td class="min-w-50px" style="border:none"></td>
                <td class="text-right" style="border-left: 1px solid #000000;">
                    Date of Assessment :
                </td>
                <td colspan="3" class="text-left">
                    @Model.projectMasterView.Assessment_Dates
                </td>
            </tr>
            <tr class="text-left">
                <td colspan="9" style="font-weight:bold;border:none">
                    <br />
                    <u>@ViewBag.Title</u>
                    <br />
                    <br />
                </td>
            </tr>
        </table>
        <table id="Wet-Area-Water-Tightness-Test-tbl">
            <thead>
                <tr class="text-center">
                    <td colspan="4" class="min-w-150px text-right">No. of compliance</td>
                    @foreach (var mod in Model.assessmentTypeModuleMasterViewModels.Where(x => x.AssessmentTypeID == 6).OrderBy(x => x.OrderBy))
                    {
                        <td colspan="@mod.ProcessCount" class="@mod.AssessmentTypeModuleShortName.Replace("&","")-Complain text-info font-weight-bold">0</td>
                    }
                </tr>
                <tr class="text-center ">
                    <td colspan="4" class="text-right">No. of checks</td>
                    @foreach (var mod in Model.assessmentTypeModuleMasterViewModels.Where(x => x.AssessmentTypeID == 6).OrderBy(x => x.OrderBy))
                    {
                        <td colspan="@mod.ProcessCount" class="@mod.AssessmentTypeModuleShortName.Replace("&","")-Check text-info font-weight-bold">0</td>
                    }
                </tr>
                <tr class="text-center">
                    <td colspan="4"></td>
                    @foreach (var mod in Model.assessmentTypeModuleMasterViewModels.Where(x => x.AssessmentTypeID == 6).OrderBy(x => x.OrderBy))
                    {
                        <td colspan="@mod.ProcessCount">@mod.AssessmentTypeModuleShortName</td>
                    }
                </tr>
                <tr class="verticalTD">
                    <td colspan="2" style="min-width: 250px;"></td>
                    <td class="text-center" colspan="2" style="min-width: 350px;">
                        <h5>Assessors</h5>
                        @foreach (var item1 in Model.projectMasterView.assessment_project_assessors_detail)
                        {
                            @item1.assessors_master.AssessorsName;
                            <br />
                        }
                    </td>
                    @foreach (var mod in Model.assessmentTypeModuleMasterViewModels.Where(x => x.AssessmentTypeID == 6).OrderBy(x => x.OrderBy))
                    {
                        foreach (var proc in Model.assessmentTypeModuleProcessMasterViewModels.Where(x => x.AssessmentTypeModuleID == mod.AssessmentTypeModuleID).OrderBy(x => x.OrderBy))
                        {
                            <td><span>@proc.AssessmentTypeModuleProcessName</span></td>
                        }
                    }
                </tr>
            </thead>

            @foreach (var trn in Model.assessmentWetAreaWaterTightnessTestTransMasterViewModels.OrderBy(x => x.AssessmentWAWTTID))
            {
                <tbody id="tbody_@trn.AssessmentWAWTTID">
                    <tr>
                        <td rowspan="@Model.ResultCount" class="sticky-col-1 min-w-50px" role="checkbox" aria-checked="false" id="rowId_@trn.AssessmentWAWTTID">@RowCnt</td>
                        <td class="sticky-col-2 min-w-200px" valign="top">Date (dd-mmm-yyyy)</td>
                        <td class="sticky-col-3 min-w-150px" valign="top">@string.Format("{0:dd-MMM-yyyy}", @trn.AssessmentDate)</td>
                        <td valign="top" class="min-w-200px sticky-col-4">
                            Results >>
                        </td>
                        @foreach (var mod in Model.assessmentTypeModuleMasterViewModels.Where(x => x.AssessmentTypeID == 6).OrderBy(x => x.OrderBy))
                        {
                            foreach (var proc in Model.assessmentTypeModuleProcessMasterViewModels.Where(x => x.AssessmentTypeModuleID == mod.AssessmentTypeModuleID).OrderBy(x => x.OrderBy))
                            {
                                foreach (var trndet in Model.assessmentWetAreaWaterTightnessTestTransDetailViewModels.Where(x => x.RowNo == 1 && x.AssessmentWAWTTID == trn.AssessmentWAWTTID && x.AssessmentTypeModuleProcessID == proc.AssessmentTypeModuleProcessID))
                                {
                                    if (Model.projectMasterView.Is_Completed == 1)
                                    {
                                        if (trndet.Result == "1") // Tick
                                        {
                                            <td class="tdChechBox" role="checkbox" aria-checked="true" disabled id="@mod.AssessmentTypeModuleShortName.Replace("&","")_@proc.AssessmentTypeModuleProcessID.ToString()_@trndet.AssessmentWAWTTDetailID.ToString()"></td>
                                        }
                                        else if (trndet.Result == "2") // Cross
                                        {
                                            <td class="tdChechBox" role="checkbox" aria-checked="false" disabled id="@mod.AssessmentTypeModuleShortName.Replace("&","")_@proc.AssessmentTypeModuleProcessID.ToString()_@trndet.AssessmentWAWTTDetailID.ToString()"></td>
                                        }
                                        else // Blank
                                        {
                                            <td class="tdChechBox" role="checkbox" aria-checked="null" disabled id="@mod.AssessmentTypeModuleShortName.Replace("&","")_@proc.AssessmentTypeModuleProcessID.ToString()_@trndet.AssessmentWAWTTDetailID.ToString()"></td>
                                        }
                                    }
                                    else
                                    {
                                        if (trndet.Result == "1") // Tick
                                        {
                                            <td class="tdChechBox" role="checkbox" aria-checked="true" id="@mod.AssessmentTypeModuleShortName.Replace("&","")_@proc.AssessmentTypeModuleProcessID.ToString()_@trndet.AssessmentWAWTTDetailID.ToString()"></td>
                                        }
                                        else if (trndet.Result == "2") // Cross
                                        {
                                            <td class="tdChechBox" role="checkbox" aria-checked="false" id="@mod.AssessmentTypeModuleShortName.Replace("&","")_@proc.AssessmentTypeModuleProcessID.ToString()_@trndet.AssessmentWAWTTDetailID.ToString()"></td>
                                        }
                                        else // Blank
                                        {
                                            <td class="tdChechBox" role="checkbox" aria-checked="null" id="@mod.AssessmentTypeModuleShortName.Replace("&","")_@proc.AssessmentTypeModuleProcessID.ToString()_@trndet.AssessmentWAWTTDetailID.ToString()"></td>
                                        }
                                    }
                                }
                            }
                        }
                    </tr>
                    @*<tr>
                            <td class="sticky-col-2" valign="top">Block/Unit</td>
                            <td class="sticky-col-3" valign="top">@trn.Block_Unit</td>
                            <td valign="top" class="min-w-200px sticky-col-4" style="font-size: 12px;">
                                1) Damp/Leak/Seepage at Slab / Soffit<br />
                                2) Damp/Leak/Seepage at Walls<br />
                                3) Leak/Seepage around penetration pipe joints<br />
                                4) Leak/Seepage from discharge pipes, joints, eyes<br />
                                5) Leak from supply pipes, joints, valves tap etc.<br />
                                6) Others please specify:<br /> <b>@trn.Other_Result</b>
                            </td>
                            @foreach (var mod in Model.assessmentTypeModuleMasterViewModels.Where(x => x.AssessmentTypeID == 6).OrderBy(x => x.OrderBy))
                            {
                                <td colspan="@mod.ProcessCount"></td>
                            }
                        </tr>*@

                    @{ modRowCnt = 1;}
                    @foreach (var TestResult in Model.assessmentWetAreaWaterTightnessTestResultMasterViewModels.Where(x => x.IsActive == 1).OrderBy(x => x.OrderBy))
                    {
                    <tr>
                        @if (modRowCnt == 1)
                        {
                            <td class="sticky-col-2" valign="top">Block/Unit</td>
                            <td class="sticky-col-3" valign="top">@trn.Block_Unit</td>
                            <td valign="top" class="min-w-200px sticky-col-4" style="font-size: 12px;">
                                @modRowCnt) @TestResult.AssessmentWAWTTResult
                            </td>
                        }
                        else if (modRowCnt == 2)
                        {
                            <td class="sticky-col-2" valign="top" rowspan="5" colspan="2">
                                @if (!string.IsNullOrEmpty(trn.Drawing_Image))
                                {
                                    <img src="@trn.Drawing_Image" height="50" id="img_@trn.AssessmentWAWTTID">
                                }
                            </td>
                            <td valign="top" class="min-w-200px sticky-col-4" style="font-size: 12px;">
                                @modRowCnt) @TestResult.AssessmentWAWTTResult&nbsp;
                            </td>
                        }
                        else if (modRowCnt == 6)
                        {
                            <td valign="top" class="min-w-200px sticky-col-4" style="font-size: 12px;">
                                @modRowCnt) @TestResult.AssessmentWAWTTResult&nbsp;<br /><b>@trn.Other_Result</b>
                            </td>
                        }
                        else
                        {
                            <td valign="top" iclass="min-w-200pxssticky-co=-4" styl="font-size: 12px;">
                                @modRowCnt) @TestResult.AssessmentWAWTTResult&nbsp;duleProcessMasterViewModel
                            </td>
                        }
                        @foreach (var mod in Model.assessmentTypeModuleMasterViewModels.Where(x => x.AssessmentTypeID == 6).OrderBy(x => x.OrderBy))
                        {
                            foreach (var proc in Model.assessmentTypeModuleProcessMasterViewModels.Where(x => x.AssessmentTypeModuleID == mod.AssessmentTypeModuleID).OrderBy(x => x.OrderBy))
                            {
                                foreach (var trndet in Model.assessmentWetAreaWaterTightnessTestTransDetailResultViewModels?.Where(x => x.AssessmentWAWTTResultID == TestResult.AssessmentWAWTTResultID && x.AssessmentWAWTTID == trn.AssessmentWAWTTID && x.AssessmentTypeModuleProcessID == proc.AssessmentTypeModuleProcessID))
                                {
                                    if (Model.projectMasterView.Is_Completed == 1)
                                    {
                                        if (trndet.Result == "1") // Tick
                                        {
                                            <td class="tdCheckBoxResult" role="checkbox" aria-checked="true" disabled id="@mod.AssessmentTypeModuleShortName.Replace("&", "")_@proc.AssessmentTypeModuleProcessID.ToString()_@trndet.AssessmentWAWTTDetailResultID.ToString()"></td>
                                        }
                                        else if (trndet.Result == "2") // Cross
                                        {
                                            <td class="tdCheckBoxResult" role="checkbox" aria-checked="false" disabled id="@mod.AssessmentTypeModuleShortName.Replace("&", "")_@proc.AssessmentTypeModuleProcessID.ToString()_@trndet.AssessmentWAWTTDetailResultID.ToString()"></td>
                                        }
                                        else // Blank
                                        {
                                            <td class="tdCheckBoxResult" role="checkbox" aria-checked="null" disabled id="@mod.AssessmentTypeModuleShortName.Replace("&","")_@proc.AssessmentTypeModuleProcessID.ToString()_@trndet.AssessmentWAWTTDetailResultID.ToString()"></td>
                                        }
                                    }
                                    else
                                    {
                                        if (trndet.Result == "1") // Tick
                                        {
                                            <td class="tdCheckBoxResult" rol="checkbox" aria-checked=true id="@mod.AssessmentTypeModuleShortName.Replace("&", "")_@proc.AssessmentTypeModuleProcessID.ToString()_@trndet.AssessmentWAWTTDetailResultID.ToString()"></td>
                                        }
                                        else if (trndet.Result == "2") // Cross
                                        {
                                            <td class="tdCheckBoxResult" rol="checkbox" aria-checked="false" id="@mod.AssessmentTypeModuleShortName.Replace("&","")_@proc.AssessmentTypeModuleProcessID.ToString()_@trndet.AssessmentWAWTTDetailResultID.ToString()"></td>
                                        }
                                        else // Blank
                                        {
                                            <td class="tdCheckBoxResult" role="checkbox" aria-checked="null" id="@mod.AssessmentTypeModuleShortName.Replace("&", "")_@proc.AssessmentTypeModuleProcessID.ToString()_@trndet.AssessmentWAWTTDetailResultID.ToString()"></td>
                                        }
                                    }
                                }
                            }
                            {
                                modRowCnt++;
                            }
                        }
                    </tr>
                    }
                </tbody>
                {
                    RowCnt++;
                }
            }

            <tr class="text-success font-weight-bold text-center ">
                <td colspan="4" class="text-right" style="border-left: 1px solid #000000;">No. of Ticks</td>
                @foreach (var mod in Model.assessmentTypeModuleMasterViewModels.Where(x => x.AssessmentTypeID == 6).OrderBy(x => x.OrderBy))
                {
                    foreach (var proc in Model.assessmentTypeModuleProcessMasterViewModels.Where(x => x.AssessmentTypeModuleID == mod.AssessmentTypeModuleID).OrderBy(x => x.OrderBy))
                    {
                        <td class="@mod.AssessmentTypeModuleShortName.Replace("&","")-@proc.AssessmentTypeModuleProcessID-TickCount text-center"></td>
                    }
                }
            </tr>
            <tr class="text-success font-weight-bold text-center ">
                <td colspan="4" class="text-right" style="border-left: 1px solid #000000;">No. of checks</td>
                @foreach (var mod in Model.assessmentTypeModuleMasterViewModels.Where(x => x.AssessmentTypeID == 6).OrderBy(x => x.OrderBy))
                {
                    foreach (var proc in Model.assessmentTypeModuleProcessMasterViewModels.Where(x => x.AssessmentTypeModuleID == mod.AssessmentTypeModuleID).OrderBy(x => x.OrderBy))
                    {
                        <td class="@mod.AssessmentTypeModuleShortName.Replace("&","")-@proc.AssessmentTypeModuleProcessID-CheckCount text-center"></td>
                    }
                }
            </tr>
        </table>
    }

    <script src="~/Content/assets/js/jquery.min.js"></script>
    <script src="~/Content/assets/js/popper.min.js"></script>
    <script src="~/Content/assets/js/bootstrap.min.js"></script>
    <script>

        onLoadmoduleStatusCount();

        function onLoadmoduleStatusCount() {
            var ModuleProcessArray = $.parseJSON($('#hdnForModuleAndProcess').val());
            for (let Mi = 0; Mi < ModuleProcessArray.length; Mi++) {
                moduleStatusCount(ModuleProcessArray[Mi].ModuleNames);
                for (let Pi = 0; Pi < ModuleProcessArray[Mi].ProcessIds.length; Pi++) {
                    ProcessStatusCount(ModuleProcessArray[Mi].ModuleNames + '_' + ModuleProcessArray[Mi].ProcessIds[Pi]);
                }
            }
        }

        /* Module Status Count Function - start */
        function moduleStatusCount(id) {

            let eventidSplit = id.split('_');
            let eventidSplitFirst = eventidSplit[0];
            let eventidSplitLast = eventidSplit[1];
            let module = document.querySelectorAll('[id^="' + eventidSplitFirst + '"]');
            let Complains = 0;
            let Checks = 0;
            let individualCompliance_1 = 0;
            let individualCheck_1 = 0;

            for (let i = 0; i < module.length; i++) {
                if (module[i].className == "tdChechBox") {
                    let checkBoxValue = module[i].getAttribute('aria-checked');
                    let idSplitArray = module[i].id.split('_');
                    let idSplitlastIndex = idSplitArray[1];
                    if (checkBoxValue == 'true') {
                        Checks++;
                        Complains++;
                        if (idSplitlastIndex == eventidSplitLast) {
                            individualCompliance_1++;
                            individualCheck_1++;
                        }
                    }
                    else if (checkBoxValue == 'false') {
                        Checks++;
                        if (idSplitlastIndex == eventidSplitLast) {
                            individualCheck_1++;
                        }
                    }
                }
            }
            document.querySelector('.' + eventidSplitFirst + '-Complain').innerHTML = Complains;
            document.querySelector('.' + eventidSplitFirst + '-Check').innerHTML = Checks;

            if (eventidSplit.length > 1) {
                document.querySelector('.' + eventidSplitFirst + '-' + eventidSplitLast + '-TickCount').innerHTML = individualCompliance_1;
                document.querySelector('.' + eventidSplitFirst + '-' + eventidSplitLast + '-CheckCount').innerHTML = individualCheck_1;
            }
        }

        function ProcessStatusCount(id) {
            let eventidSplit = id.split('_');
            let eventidSplitFirst = eventidSplit[0];
            let eventidSplitLast = eventidSplit[1];
            let module = document.querySelectorAll('[id^="' + id + '"]');
            let individualCompliance = 0;
            let individualCheck = 0;
            for (let i = 0; i < module.length; i++) {
                if (module[i].className == "tdChechBox") {
                    let checkBoxValue = module[i].getAttribute('aria-checked');
                    if (checkBoxValue == 'true') {
                        individualCompliance++;
                        individualCheck++;
                    }
                    else if (checkBoxValue == 'false') {
                        individualCheck++;
                    }
                }
            }
            document.querySelector('.' + eventidSplitFirst + '-' + eventidSplitLast + '-TickCount').innerHTML = individualCompliance;
            document.querySelector('.' + eventidSplitFirst + '-' + eventidSplitLast + '-CheckCount').innerHTML = individualCheck;
        }
    </script>
</body>
</html>